# Проект «api_yamdb» в контейнерах

## 1. [Описание](#1)
## 2. [Переменные окружения](#2)
## 3. [Команды для запуска](#3)
## 4. [Заполнение базы данных](#4)


## 1 Описание <a id=1></a>

Проект предназначен для взаимодействия с API социальной сети YaMDb.
YaMDb собирает отзывы пользователей на различные произведения.
API предоставляет возможность взаимодействовать с социальной сетью по следующим направлениям:

  - авторизироваться
  - создавать свои отзывы и управлять ими (корректировать\удалять)
  - просматривать и комментировать отзывы других пользователей
  - просматривать комментарии к своему и другим отзывам
  - просматривать произведения, категории и жанры произведений

Проект поставляется в трёх контейнерах Docker (db, web, nginx).


## 2. Переменные окружения <a id=2></a>

Шаблон для заполнения файла "./infra/.env":
```
DB_ENGINE=django.db.backends.postgresql
DB_NAME=postgres
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
DB_HOST=db
DB_PORT=5432
```


## 3. Команды для запуска <a id=3></a>

Из папки "./infra/" выполнить команду создания и запуска контейнеров:
```
docker-compose up
```

После успешного запуска контейнеров выполнить миграции:
```
docker-compose exec web python manage.py migrate
```

Создать суперюзера:
```
docker-compose exec web python manage.py createsuperuser
```

Собрать статику:
```
docker-compose exec web python manage.py collectstatic --no-input 
```

Теперь доступность проекта можно проверить по адресу [http://localhost/admin/]


## 4. Заполнение базы данных <a id=4></a>

Скопировать файл с дампом базы данных из папки "./infra/" в контейнер:
```
docker cp fixtures.json infra_web_1:/app/fixtures.json
```

Заполненить базу данных из файла с дампом:
```
docker-compose exec web python manage.py loaddata fixtures.json
```
